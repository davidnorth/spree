<h1><%= t("editing_promotion") %></h1>

<%= error_messages_for :promotion %>
<% form_for(@promotion, :url => object_url, :html => { :method => :put }) do |f| %>
  <%= render :partial => "form", :locals => { :f => f } %>
  <%= render :partial => "admin/shared/edit_resource_links" %>
<% end %>

<fieldset>
  <legend>Rules</legend>
  
  <div id="rules" class="filter_list">
    <% if @promotion.rules.any? %>
      <%= render :partial => 'promotion_rule', :collection => @promotion.rules %>
    <% else %>
      <p><%= t('no rules added') %></p>
    <% end %>
  </div>

  <% form_tag(admin_promotion_promotion_rules_path(@promotion), 'data-remote' => true, :id => 'new_product_rule_form') do |f| %>
    <% options = options_for_select( PromotionRule.rule_class_names.map {|name| [ t("promotion_rule_types.#{name.demodulize.underscore}.name"), name] } ) %>
    <p>
      <label for="promotion_rule_type"><%= t('add_rule') %></label>
      <%= select_tag("promotion_rule[type]", options) %>
      <input type="submit" value="<%= t('add') %>" />
    </p>
  <% end %>
  
</fieldset>



<% content_for :head do %>
  <%= javascript_include_tag 'admin/promotions.js' %>
  <%= stylesheet_link_tag 'admin/promotions.css' %>
<% end %>
